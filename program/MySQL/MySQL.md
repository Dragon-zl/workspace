###### 数据库安全加强脚本

```
mysql_secure_installation
```

安装数据库后一般首先执行上面的脚本，给数据库设置密码等相关安全设置

### MySQL架构和历史

#### MySQL的逻辑框架图

<img src="E:\Guangdong_inlay\Linux_study\Typora_md_file\picture\Mysql存储结构.png" alt="Mysql存储结构" style="zoom:80%;" />

服务器通过API与存储引擎进行通信。

##### 连接管理与安全性

每个客户端连接都会在服务器进程中拥有一个线程。

服务器会负责缓存线程，不需要每个新建的连接创建或者销毁线程。

#### 并发控制

##### 读写锁

读锁是共享的，互补阻塞。

写锁是排他的，会阻塞其他写锁和读锁。

##### 锁粒度

只对会修改的数据片进行精确的锁定，提高并发性。

##### 锁策略

###### 表锁

最基本的锁策略，开销最小，锁定一整张表。

###### 行级锁

行级锁可以最大程度的执行并发操作，同时也是最大的锁开销。

行级锁只在存储引擎层实现，而MySQL服务层并没有实现。

#### 事务

事务就是一组原子性的SQL查询，或者说一个独立的工作单元。

事务内的语句，要么全部执行成功，要么全部执行失败。

##### ACID测试

ACID表示原子性(atomicity)、一致性(consistency)、隔离性(isolation)和持久性(durability)。

一个运行良好的事务处理系统，必须具备这些标准特性。

###### 原子性(atomicity)

一个事务必须被视为一个不可分割的最小工作单元，整个事务中的所有操作要目全部提高成功，要么全部失败回滚。对于一个事务来说，不可能只执行其中的一部分，这就是事务的原子性。

###### 一致性(consistency)

数据库总是从一个一致性的状态转换到另一个一致性的状态。

###### 隔离性(isolation)

通常来说，一个事务所做的修改在最终提交以前，对其他事务是不可见的。

###### 持久性(durability)

一旦事务提交，则其所做的修改就会永久保存到数据库中。此时即使系统崩溃，修改的数据也不会丢失。

##### 隔离剂别

在SQL标准中，定义了4中隔离级别。

较低级别的隔离通常可以执行更高的并发，开销也越低。

###### 四种隔离级别

![4种隔离级别](E:\Guangdong_inlay\Linux_study\Typora_md_file\picture\4种隔离级别.png)

